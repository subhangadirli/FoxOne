// FoxOne Configuration File
// This file is loaded via autoconfig.js

// Enable custom CSS for Firefox One theme
lockPref("toolkit.legacyUserProfileCustomizations.stylesheets", true);
lockPref("svg.context-properties.content.enabled", true);
lockPref("layout.css.color-mix.enabled", true);
lockPref("layout.css.backdrop-filter.enabled", true);

// Firefox One theme preferences
defaultPref("browser.tabs.tabClipWidth", 83);
defaultPref("browser.uidensity", 0);

// Homepage and new tab settings
defaultPref("browser.startup.homepage", "about:home");
defaultPref("browser.newtabpage.enabled", true);
defaultPref("browser.newtabpage.activity-stream.feeds.topsites", true);
defaultPref("browser.newtabpage.activity-stream.showSearch", true);
defaultPref("browser.newtabpage.activity-stream.feeds.section.highlights", true);

// Privacy-focused defaults while keeping sync functionality
defaultPref("privacy.trackingprotection.enabled", true);
defaultPref("privacy.trackingprotection.socialtracking.enabled", true);
defaultPref("privacy.trackingprotection.cryptomining.enabled", true);
defaultPref("privacy.trackingprotection.fingerprinting.enabled", true);
defaultPref("network.cookie.cookieBehavior", 4);
defaultPref("dom.security.https_only_mode", true);

// Keep Mozilla Account/Sync fully functional
// Use standard Firefox endpoints for full compatibility
defaultPref("identity.fxaccounts.enabled", true);
defaultPref("identity.fxaccounts.auth.uri", "https://api.accounts.firefox.com/v1");
defaultPref("identity.fxaccounts.remote.oauth.uri", "https://oauth.accounts.firefox.com/v1");
defaultPref("identity.fxaccounts.remote.profile.uri", "https://profile.accounts.firefox.com/v1");
defaultPref("identity.fxaccounts.remote.pairing.uri", "wss://channelserver.services.mozilla.com");
defaultPref("identity.sync.tokenserver.uri", "https://token.services.mozilla.com/1.0/sync/1.5");

// Browser behavior
defaultPref("browser.download.useDownloadDir", true);
defaultPref("browser.download.dir", "");
defaultPref("browser.shell.checkDefaultBrowser", false);
defaultPref("browser.tabs.warnOnClose", true);
defaultPref("browser.urlbar.suggest.searches", true);
defaultPref("browser.urlbar.suggest.history", true);
defaultPref("browser.urlbar.suggest.bookmark", true);
defaultPref("browser.urlbar.suggest.openpage", true);

// Performance
defaultPref("browser.cache.disk.enable", true);
defaultPref("browser.cache.memory.enable", true);
defaultPref("gfx.webrender.all", true);

// Extensions defaults (uBlock enabled, Dark Reader disabled)
// Extension states are managed via policies.json

// Disable telemetry
lockPref("toolkit.telemetry.enabled", false);
lockPref("toolkit.telemetry.unified", false);
lockPref("toolkit.telemetry.archive.enabled", false);
lockPref("datareporting.healthreport.uploadEnabled", false);
lockPref("datareporting.policy.dataSubmissionEnabled", false);

// Disable studies
lockPref("app.shield.optoutstudies.enabled", false);
lockPref("app.normandy.enabled", false);

// Pocket (disabled for clean experience)
lockPref("extensions.pocket.enabled", false);
